"use strict";const e=require("electron"),a=require("path"),r=require("path"),l=require("dotenv"),c=()=>{e.protocol.registerHttpProtocol("http",(n,s)=>{let{url:o}=n;const i=process.env.VITE_BASE_URL;o.startsWith(i)&&(o=o.replace("/api","")),s({url:o})})},p=async()=>{if(!e.app.isPackaged){let n=process.env.VUE_DEV_TOOLS_PATH;await e.session.defaultSession.loadExtension(n)}},d=()=>{l.config({path:r.join(__dirname,"../.env.development")})};d();let t;const _=async()=>{t=new e.BrowserWindow({webPreferences:{preload:a.join(__dirname,"../preload/index.ts")}}),e.app.isPackaged?t.loadFile(a.join(__dirname,"../index.html")):(t.loadURL(process.env.VITE_DEV_SERVER_URL),t.webContents.openDevTools())};async function h(){const{canceled:n,filePaths:s}=await e.dialog.showOpenDialog({properties:["openFile","multiSelections"]});if(!n)return s[0]}e.app.whenReady().then(async()=>{e.ipcMain.handle("transfer",h),_(),p(),c()});
